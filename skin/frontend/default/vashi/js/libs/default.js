var vashiGlobal={config:{isMobile:false},scrollTop:null,init:function(data){jQuery.extend(this.config,data);try{var a=window.matchMedia("only screen and (max-device-width: 400px)");this.config.isMobile=a.matches;}catch(e){}var doLazyLoadOnScoll=function doLazyLoadOnScoll(){this.lazyLoadOnScroll();jQuery(window).off('scroll',doLazyLoadOnScoll);}.bind(this);jQuery(window).on('scroll',doLazyLoadOnScoll);jQuery(document).ready(function(){this.lazyLoadOnLoad();this.basketMessages();this.navHover();}.bind(this));},lazyLoadOnLoad:function(){jQuery('.js-lazyloader-onload').each(function(){vashiGlobal.lazyloader(this);});},lazyLoadOnScroll:function(){jQuery('.js-lazyloader-onscroll').each(function(){vashiGlobal.lazyloader(this);});},lazyloader:function(el){var media=jQuery(el).data('media');var lazyLoad=true;if((media=='desktop')&&(vashiGlobal.config.isMobile)){lazyLoad=false;}if((media=='mobile')&&(!vashiGlobal.config.isMobile)){lazyLoad=false;}if(lazyLoad){var src=jQuery(el).data('src');jQuery(el).attr('src',src);}jQuery(el).removeClass('js-lazyloader-onscroll');},scrollLock:function(){jQuery('body, html').addClass('no-overflow ios-height-100');if(window.pageYOffset){this.scrollTop=window.pageYOffset;jQuery('section#body').addClass('js-scroll-lock pos-relative');jQuery('section#body.js-scroll-lock').css({top:-(this.scrollTop)});jQuery('section.js-header').addClass('pos-relative-z');}},scrollUnlock:function(){jQuery('body, html').removeClass('no-overflow ios-height-100');jQuery('section#body').removeClass('js-scroll-lock pos-relative').css({top:''});jQuery('section.js-header').removeClass('pos-relative-z');window.scrollTo(0,this.scrollTop);this.scrollTop=null;},basketMessages:function(){if(jQuery('.basket-messages').children().length>0){setTimeout(function(){jQuery('.basket-messages').slideUp('slow',function(){});},5000);}},navHover:function(){jQuery('.navbar-nav li').mouseover(function(){jQuery('.navbar-nav').addClass('hover-menu');jQuery(this).removeClass('active');});jQuery('.navbar-nav li').mouseout(function(){jQuery('.navbar-nav').removeClass('hover-menu');jQuery(this).addClass('active');});}};(function(w,d){var loaded={};var callbacks={};var VashiRequire=function(){};VashiRequire.prototype.load=function(script,callback){if(typeof loaded[script]!=='undefined'){callback.apply();return this;}if(typeof callbacks[script]==='object'){callbacks[script].push(callback);return this;}callbacks[script]=[callback];var js=d.createElement('script');js.onload=function(){(function(script){for(var i=0;i<callbacks[script].length;i++){var callback=typeof callbacks[script][i]==='function'?callbacks[script][i]:function(){};callback.apply();}loaded[script]=true;})(script);};js.async=true;js.src=script;var fjs=d.getElementsByTagName('script')[0];fjs.parentNode.insertBefore(js,fjs);return this;};w.VashiRequire=new VashiRequire();})(window,document);jQuery(document).ready(function(jQuery){var mobileToggler=jQuery('.mobile-nav-toggler'),mobileCloseButton=jQuery('.mobileCloseButton'),firstLevelMenu=jQuery('.first-level-menu'),secondLevelMenu=jQuery('.second-level-menu'),backCta=jQuery('.js-level-up'),slidingMenu=jQuery('.slide-menu'),mobileHeader=jQuery('.mobile-header'),desktopHeader=jQuery('.desktop-header'),touchBreakPoint=slidingMenu.attr('data-touchWidth'),mobileBreakPoint=slidingMenu.attr('data-mobileWidth'),nav=jQuery('ul.main-nav > li'),inMenu=false,timer=null,menuItem;vashiDepends('Modernizr',function(){if((Modernizr.touch)&&(jQuery(window).width()<touchBreakPoint)){mobileHeader.show();desktopHeader.hide();jQuery('.wrapper.content').repositionWrapperFromBreadCrumbs();jQuery('.top-breakline').css({"border":"none"});jQuery('.mobile-logo').show();}else if((Modernizr.touch)&&(jQuery(this).width()>mobileBreakPoint)){mobileHeader.hide();jQuery('.top-breakline').css({"border-top":"5px solid #df5c48"});desktopHeader.show();jQuery('.wrapper.content').repositionWrapperFromBreadCrumbs();jQuery('.mobile-logo').hide();}});jQuery(window).on("resize",function(){if((Modernizr.touch)&&(jQuery(window).width()<touchBreakPoint)){mobileHeader.show();desktopHeader.hide();jQuery('.top-breakline').css({"border-top":"none"});jQuery('.wrapper.content').repositionWrapperFromBreadCrumbs();jQuery('.mobile-logo').show();}else if((Modernizr.touch)&&(jQuery(window).width()>touchBreakPoint)){mobileHeader.hide();desktopHeader.show();jQuery('.wrapper.content').repositionWrapperFromBreadCrumbs();jQuery('.top-breakline').css({"border-top":"5px solid #df5c48"});jQuery('.mobile-logo').hide();}else if((!Modernizr.touch)&&(jQuery(this).width()>mobileBreakPoint)){slidingMenu.removeClass('active');jQuery('body').removeClass('js-no-overflow');secondLevelMenu.removeClass('active');mobileToggler.removeClass('active');jQuery('.top-breakline').css({"border-top":"5px solid #df5c48"});mobileHeader.hide();desktopHeader.show();nav.hover(function(){var that=this;timer=setTimeout(function(){doClear(nav);jQuery(that).children('.sub-menu').removeClass('hide');jQuery(that).children('h4').addClass('on');inMenu=true;},125);},function(){doClear(this);});}else if((!Modernizr.touch)&&(jQuery(this).width()<mobileBreakPoint)){mobileHeader.show();desktopHeader.hide();}});mobileToggler.on('click',function(){console.log(mobileToggler);mobileToggler.toggleClass('active');console.log(mobileToggler.hasClass("active"));firstLevelMenu.removeClass('active');secondLevelMenu.removeClass('active');slidingMenu.toggleClass('active');jQuery('body').toggleClass('js-no-overflow');if(mobileToggler.hasClass("active")){window.setTimeout(function(){vashiGlobal.scrollLock();},500);}else{vashiGlobal.scrollUnlock();}});mobileCloseButton.on('click',function(){console.log("close");mobileToggler.toggleClass('active');slidingMenu.removeClass('active');jQuery('body').removeClass('js-no-overflow');});backCta.on('click',function(event){firstLevelMenu.toggleClass('active');jQuery('.second-level-menu[data-menu="'+menuItem+'"]').toggleClass('active');event.stopPropagation();});});var vashiBrandPage={config:{slider:false,slides:[],pages:[],},currentSlideNumber:0,currentSlide:false,lastSlideNumber:0,init:function(data){jQuery.extend(this.config,data);this.attachListeners();this.searchForSlides();this.showSlide(0);jQuery('.nav-buttons').addClass("loaded");},attachListeners:function(){jQuery('.vashiSlider .js-button-prev').on('click',function(){this.goToPreviousSlide();}.bind(this));jQuery('.vashiSlider .js-button-next').on('click',function(){this.goToNextSlide();}.bind(this));},searchForSlides:function(){var page=jQuery('.slide-page-wrapper');this.config.slides=[];jQuery('.slide',this.config.slider).each(function(i,v){this.config.slides.push(v);this.config.pages.push(page);jQuery(page).hide();if(i>0){jQuery('.js-animate',v).addClass('is-hidden-right');}}.bind(this));},goToNextSlide:function(){if(this.currentSlideNumber<this.config.slides.length-1){this.showSlide(this.currentSlideNumber+1)}},goToPreviousSlide:function(){if(this.currentSlideNumber>0){this.showSlide(this.currentSlideNumber-1)}},_hideButtons:function(){jQuery('.slideside').addClass('fade-background');jQuery('.brand-buttons').css({'opacity':0});},_showButtons:function(){jQuery('.slideside').removeClass('fade-background');jQuery('.brand-buttons').css({'opacity':1});},showAsSlide:function(e){jQuery(e).each(function(i,v){jQuery(v,this.currentSlide).addClass('show-as-slide');jQuery(v,this.currentSlide).removeClass('show-as-page');}.bind(this));},showAsPage:function(e){jQuery(e).each(function(i,v){jQuery(v,this.currentSlide).addClass('show-as-page');jQuery(v,this.currentSlide).removeClass('show-as-slide');}.bind(this));},showSlide:function(slideNumber){this.lastSlideNumber=this.currentSlideNumber;this.currentSlideNumber=slideNumber;this.currentSlide=this.config.slides[this.currentSlideNumber];this.currentPage=this.config.pages[this.currentSlideNumber];this.lastSlide=this.config.slides[this.lastSlideNumber];jQuery('.slide').addClass('is-hidden');jQuery(this.currentSlide).removeClass('is-hidden');if(this.lastSlideNumber<this.currentSlideNumber){jQuery('.js-animate',this.currentSlide).removeClass('is-hidden-right');jQuery('.js-animate',this.lastSlide).addClass('is-hidden-left');}else if(this.lastSlideNumber>this.currentSlideNumber){jQuery('.js-animate',this.currentSlide).removeClass('is-hidden-left');jQuery('.js-animate',this.lastSlide).addClass('is-hidden-right');}if(this.isFirstSlide()){jQuery('.js-button-prev').addClass('nav-disabled');}else{jQuery('.js-button-prev').removeClass('nav-disabled');}if(this.isLastSlide()){jQuery('.js-button-next').addClass('nav-disabled');}else{jQuery('.js-button-next').removeClass('nav-disabled');}this.updateNavigator();},updateNavigator:function(){var lastStepClass='step'+(this.lastSlideNumber+1);var stepClass='step'+(this.currentSlideNumber+1);for(var i=1;i<=this.config.slides.length;i++){if(i<(this.currentSlideNumber+1)){jQuery('.step'+i).addClass('is-passed');}else if(i==(this.currentSlideNumber+1)){if(lastStepClass<stepClass){jQuery('.step'+i).removeClass('is-passed');}}else{jQuery('.step'+i).removeClass('is-passed');}}if(lastStepClass<stepClass){jQuery('.js-clipping-mask').removeClass(lastStepClass);jQuery('.js-clipping-mask').addClass(stepClass);}else{jQuery('.js-clipping-mask').removeClass(lastStepClass);jQuery('.js-clipping-mask').addClass(stepClass);}jQuery('.js-active-step-marker').removeClass(lastStepClass);jQuery('.js-active-step-marker').addClass(stepClass);},isFirstSlide:function(){if(this.currentSlideNumber==0){return true;}else{return false;}},isLastSlide:function(){if(this.currentSlideNumber==this.config.slides.length-1){return true;}else{return false;}},}
var vashiMaterial={isInit:false,init:function(){if(vashiMaterial.isInit){return}vashiMaterial.refreshLabel(jQuery('.js-material-field'));jQuery('.material-textfield input').on('change',function(e){jQuery(e.target.closest('.js-material-field')).removeClass('is-blank');});jQuery('.material-textfield input').on('focus',function(e){jQuery(e.target.closest('.js-material-field')).removeClass('is-blank');});jQuery('.material-textfield input').on('focusout',function(e){vashiMaterial.refreshLabel(jQuery(e.target.closest('.js-material-field')));});vashiMaterial.isInit=true;},refresh:function(){jQuery('.js-material-field').each(function(){vashiMaterial.refreshLabel(this);})},refreshLabel:function(e){if(!jQuery('input',e).val()){jQuery(e).addClass('is-blank');}else{jQuery(e).removeClass('is-blank');}}}
var vashiNavbar={config:{},submenuVisible:false,init:function(data){jQuery.extend(this.config,data);this.attachEvents();},attachEvents:function(){jQuery('.level0.parent').mouseenter(function(e){this.onSubmenuEnter(e);}.bind(this));jQuery('.level0.parent').mouseleave(function(e){this.onSubmenuLeave(e);}.bind(this));},onSubmenuEnter:function(e){var parent=jQuery(e.target).closest('.level0');var subMenu=jQuery('.sub-menu',parent);vashiNavbar.showSubMenu(subMenu,parent);}.bind(this),onSubmenuLeave:function(e){var parent=jQuery(e.target).closest('.level0');var subMenu=jQuery('.sub-menu',parent);vashiNavbar.hideSubMenu(subMenu,parent);}.bind(this),showSubMenu:function(subMenu,parent){jQuery(parent).addClass('isVisible');}.bind(this),hideSubMenu:function(subMenu,parent){jQuery(parent).removeClass('isVisible');}.bind(this),showMenu:function(){}.bind(this),hideMenu:function(){}.bind(this)}
var VashiTouch=function(data){var me=this;var config={};var enableScroll=false;var parentElement=false;var d=false;var p=false;var state=false;var clickEnable=true;var ts=0;var msx=0;var msy=0;var mlx=false;var mly=false;var mmv=false;var mmvx=false;var mmvy=false;me.init=function(data){jQuery.extend(config,data);parentElement=config.parentElement;jQuery(parentElement).on('mousedown',function(event){touchStart({posX:event.screenX,posY:event.screenY});});jQuery(parentElement).on('mousemove',function(event){touchMove({posX:event.screenX,posY:event.screenY},event);});jQuery(parentElement).on('mouseup',function(event){touchEnd(event);});jQuery(parentElement).on('touchstart',function(event){touchStart({posX:event.originalEvent.touches[0].clientX,posY:event.originalEvent.touches[0].clientY});});jQuery(parentElement).on('touchmove',function(event){if(!d||p)return;touchMove({posX:event.originalEvent.touches[0].clientX,posY:event.originalEvent.touches[0].clientY},event);});jQuery(parentElement).on('touchend',function(event){if(!d)return;touchEnd();});}.bind(me);me.enableScroll=function(value){enableScroll=value;}.bind(me);var touchStart=function(e){clickEnable=true;ts=+new Date();resetVelCalc();d=true;p=false;msx=e.posX;mlx=e.posX;msy=e.posY;mly=e.posY;}.bind(me);var touchMove=function(e,event){if(!enableScroll){event.preventDefault();}clickEnable=false;px=e.posX;mdx=px-msx;py=e.posY;mdy=py-msy;recalcMaxVel(e);}.bind(me);var touchEnd=function(e){if(!d)return;d=false;var dx=msx-mlx;var dy=msy-mly;var currentTime=+new Date();var dt=currentTime-ts;var sx=Math.abs(dx/dt);var sy=Math.abs(dy/dt);if(dx>100){fireFlick('left');}else if(dx<-100){fireFlick('right');}else if(dy>100){fireFlick('up');}else if(dy<-100){fireFlick('down');}else if(sx>0.7){if(dx>0){fireFlick('left');}else{fireFlick('right');}}else if(sy>0.7){if(dy>0){fireFlick('up');}else{fireFlick('down');}}}.bind(me);var fh=false;var fireFlick=function(d){var ct=+new Date();if(fh&&(ct<fh+500))return;config.onflick(d);}.bind(me);var resetVelCalc=function(){mmvx=0;mmvy=0;}.bind(me);var recalcMaxVel=function(e){var mvx=Math.abs(mlx-e.posX);if(mvx>mmvx)mmvx=mvx;mlx=px;var mvy=Math.abs(mly-e.posY);if(mvy>mmvy)mmvy=mvy;mly=py;}.bind(me);return me;};jQuery.fn.vashiTouch=function(data){jQuery.extend(data,{parentElement:this});var vashiTouch=new VashiTouch();vashiTouch.init(data);return vashiTouch;};var vashiViewings={config:{dateSelect:false,timeSelected:false},init:function(data){jQuery.extend(this.config,data);jQuery(document).on('bookingReload',function(){vashiViewings.onReload()});jQuery(document).on('bookingOpen',function(){vashiViewings.onOpen()});jQuery(document).on('selectStore',function(){vashiViewings.onSelectStore()});jQuery(document).on('selectDate',function(){vashiViewings.onSelectDate()});jQuery(document).on('selectTime',function(){vashiViewings.onSelectTime();vashiViewings.hidePickATimeDropDownDk();});jQuery(document).on('selectContact',function(){vashiViewings.onSelectContact()});jQuery(document).on('selectInterest',function(){vashiViewings.onSelectInterest()});jQuery('#select-time').dropkick({mobile:false});},onOpen:function(){jQuery('#select-time').dropkick({mobile:false});try{if(typeof vashiStoreId==='number'){jQuery("input[name=store][value='"+vashiStoreId+"']").click();}}catch(e){}},onReload:function(){jQuery('.js-click-time').dropkick();jQuery('#select-time').dropkick({mobile:false});},hideSteps:function(){jQuery('.js-select-time').hide();jQuery('.js-select-contact').hide();jQuery('.js-select-interest').hide();},onSelectStore:function(){this.config.dateSelected=false;this.config.timeSelected=false;},onSelectDate:function(){this.config.dateSelected=true;this.config.timeSelected=false;jQuery('.js-select-time').show();jQuery('.js-select-contact').show();jQuery('.js-select-interest').show();},onSelectTime:function(){this.config.timeSelected=true;},onSelectContact:function(){},onSelectInterest:function(){},showAjaxSpinner:function(){jQuery('.viewings-loader').show();},hideAjaxSpinner:function(){jQuery('.viewings-loader').hide();},hidePickATimeDropDownDk:function(){var selectTimeSelector=jQuery('select#select-time.js-click-time');var dkSelectTime=jQuery('div[id^=dk].dk-select.js-click-time');if(selectTimeSelector.length>0&&dkSelectTime.length>0){jQuery(dkSelectTime).hide()}}};jQuery(document).ready(function(){window.modalWidth='702';if(jQuery(window).width()<702){window.modalWidth=jQuery(window).width()*0.95;}jQuery("#viewings-dialog").dialog({autoOpen:false,modal:true,draggable:false,resizable:false,width:window.modalWidth,open:function(){jQuery('.ui-widget-overlay').bind('click',function(){jQuery('#viewings-dialog').dialog('close');});jQuery(document).trigger('bookingOpen');vashiViewings.init();},close:function(){jQuery('body').removeClass('js-no-overflow');},show:{effect:"blind",duration:400},hide:{effect:"fade"},zIndex:1000,closeText:"Close"});vashiViewings.init();jQuery('.ui-dialog').css('z-index','1000');jQuery("#viewings").click(function(){jQuery(document).trigger('bookingOpen');jQuery("#viewings-dialog").dialog({open:function(event,ui){if(!jQuery('#viewings-calender-form').is(":visible")){setTimeout(function(){jQuery(".product-slots").hide();jQuery("#booking-close").hide();if(!(/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))){jQuery('.ui-dialog').css('box-shadow','0 0 0px 0 rgba(0, 0, 0, 0.11)');jQuery(".ui-dialog-titlebar-close").css('margin','91px 70px 0');jQuery(".ui-dialog-titlebar-close").css('font-size','13.3px');jQuery(".ui-icon-closethick").css('background-size','21px auto');jQuery(".ui-button-icon-only .ui-icon").css('margin-left','14px');jQuery(".ui-button-icon-only .ui-icon").css('margin-top','-10px');}else{jQuery("body").addClass("no-scroll");jQuery("#booked-product-img-mobile").hide();jQuery(".introDesktop").hide();jQuery(".introMobile").show();jQuery('#login-content').css('box-shadow','0 0 0px 0 rgba(0, 0, 0, 0.11)');jQuery('#login-content').css('border','0px');jQuery('#login-content').css('border-top','1px solid #e0e0e0');jQuery('#signup-content').css('box-shadow','0 0 0px 0 rgba(0, 0, 0, 0.11)');jQuery('#signup-content').css('border','0px');jQuery('#signup-content').css('border-top','1px solid #e0e0e0');jQuery('#viewings-dialog').css('padding','0.5em 0em');jQuery('.viewings-modal .input-text').css('width','70%');jQuery('.input-box-left').addClass("input-box");jQuery('.input-box-left').removeClass("input-box-left");jQuery('.input-box-right').addClass("input-box");jQuery('.input-box-right').removeClass("input-box-right");jQuery('#viewings-login-form').addClass("mobile-form");jQuery('#viewings-register-form').addClass("mobile-form");jQuery("#comments").css("width","84%");if(jQuery('.appointment-details')){jQuery(".appointment-details").css('margin-left','auto');jQuery(".appointment-details").css('margin-right','auto');jQuery(".appointment-details").css('float','none');jQuery(".appointment-map").hide();}}if(jQuery(".desktop-reservation")){jQuery(".desktop-reservation").parent().hide();}},300);}else{setTimeout(function(){jQuery('.ui-dialog').css('box-shadow','0 0 5px 0 rgba(0, 0, 0, 0.11)');},300);}},close:function(){jQuery('body').removeClass('js-no-overflow');}});jQuery("#viewings-dialog").dialog("open");});jQuery(".mobViewings").click(function(){jQuery("#viewings-dialog").dialog("open");});});function editDateSelection(url){new Ajax.Request(url,{method:'GET',onComplete:function(response){var responseText=JSON.parse(response.responseText);var error=responseText.errors;if(error){jQuery('.viewings-confirmation-errors').show();jQuery('.viewings-confirmation-errors').html(error)}else{jQuery('.viewings-confirmation-errors').hide();jQuery('.viewings-content').html(responseText.html);}},onLoading:function(){jQuery('.viewings-edit-date-loader').css({display:'block'});jQuery('#viewings-confirmation-formnew').css({opacity:0.5});},onLoaded:function(){jQuery('.viewings-edit-date-loader').css({display:'none'});jQuery('#viewings-confirmation-formnew').css({opacity:1});}});}function editDateSelectionFromLogin(url){new Ajax.Request(url,{method:'GET',onComplete:function(response){var responseText=JSON.parse(response.responseText);jQuery('.viewings-content').html(responseText.html);},onLoading:function(){vashiViewings.showAjaxSpinner();jQuery('.viewings-content').css({opacity:0.5});},onLoaded:function(){vashiViewings.hideAjaxSpinner();jQuery('.viewings-content').css({opacity:1});}});}function submitCalenderForm(){setTimeout(function(){var calenderForm=new Progress('viewings-calender-form');calenderForm.submit();},200);}function submitConfirmationFormAjax(){var confirmationForm=new Progress('viewings-confirmation-formnew');confirmationForm.submit();if(typeof pintrk!=='undefined'){pintrk('track','lead',{lead_type:'Viewing'});}vashiFacebookTrackingObj.logBookAViewingConfirmationEvent();}function submitLoginForm(){var loginForm=new Progress('viewings-login-form');loginForm.submit();}function submitRegisterForm(){var registerForm=new Progress('viewings-register-form');registerForm.submit();jQuery('.viewings-time-loader').css({display:'none'});}function requestAvailableDates(store,url){new Ajax.Request(url,{method:'GET',parameters:{'store':store},onComplete:function(response){var responseText=JSON.parse(response.responseText);jQuery('#viewings-calender-form').html(responseText.html);jQuery(document).trigger('bookingReload');},onLoading:function(){jQuery('.viewings-time-loader').css({display:'block'});jQuery('.date-times').css({opacity:0.5});},onLoaded:function(){jQuery('.viewings-time-loader').css({display:'none'});jQuery('.date-times').css({opacity:1});}})}function requestAvailableTimes(day,store,url){new Ajax.Request(url,{method:'GET',parameters:{'day':day,'store':store},onComplete:function(response){var responseText=JSON.parse(response.responseText);jQuery('.date-times').html(responseText.html);jQuery("input[name*='time']").bind('click',function(){jQuery('.add-to-viewings-form').css('opacity','1.0');});jQuery(document).trigger('bookingReload');},onLoading:function(){jQuery('.viewings-time-loader')[jQuery('.viewings-time-loader').length-1].setStyle({display:'block'});jQuery('.date-times')[jQuery('.date-times').length-1].setStyle({opacity:0.5});},onLoaded:function(){jQuery('.viewings-time-loader')[jQuery('.viewings-time-loader').length-1].setStyle({display:'none'});jQuery('.date-times')[jQuery('.date-times').length-1].setStyle({opacity:1});}});}function removeViewingProduct(product_id,$type,$items,url){new Ajax.Request(url,{method:'GET',parameters:{'product_id':product_id,'type':$type,'items[]':$items},onComplete:function(response){var responseText=JSON.parse(response.responseText);jQuery("#viewings-dialog").dialog('destroy').remove();jQuery('.viewings-dialog-wrapper')[jQuery('.viewings-dialog-wrapper').length-1].update(responseText.html);jQuery("#viewings-dialog").dialog({autoOpen:false,modal:true,appendTo:"#wrapper",width:window.modalWidth,open:function(){jQuery('.ui-widget-overlay').bind('click',function(){jQuery('#viewings-dialog').dialog('close');});},close:function(){jQuery('body').removeClass('js-no-overflow');},show:{effect:"blind",duration:400},hide:{effect:"fade"},zIndex:1000});jQuery('.ui-dialog').css('z-index','1000');jQuery("#viewings-dialog").dialog("open");jQuery("#viewings").click(function(){jQuery("#viewings-dialog").dialog("open");});jQuery(".mobViewings").click(function(){jQuery("#viewings-dialog").dialog("open");});jQuery('.tab:first-child').on('click',function(){jQuery('.viewings-content .login-tabs').css('min-height','300px')});jQuery('.tab:last-child').on('click',function(){jQuery('.viewings-content .login-tabs').css('min-height','500px')});},onLoading:function(){jQuery('.product-remove-loader')[jQuery('.product-remove-loader').length-1].setStyle({display:'block'});jQuery('.viewings-modal')[jQuery('.viewings-modal').length-1].setStyle({'opacity':0.4});}});}function fluidDialog(){let $visible=jQuery(".ui-dialog:visible");$visible.each(function(){let $this=jQuery(this);let dialog=$this.find(".ui-dialog-content").data("ui-dialog");if(dialog.options.fluid){let winWidth=jQuery(window).width();if(winWidth<(parseInt(dialog.options.maxWidth)+50)){$this.css("max-width","100%");jQuery('body').addClass('fixContent');}else{$this.css("max-width",dialog.options.maxWidth+"px");}dialog.option("position",dialog.options.position);}});}function dialogHeight(){let viewportHeight=jQuery(window).height();let bookingHeight=jQuery("#viewings-dialog").outerHeight();let topDistance=jQuery("#viewings-dialog").offset().top;if(bookingHeight>=viewportHeight){jQuery('body').addClass('fixContent');}else{jQuery('body').removeClass('fixContent');}if(topDistance<=0){jQuery('body').addClass('fixContent');}else{jQuery('body').removeClass('fixContent');}}function addToViewings(parameters,url){var notMobileDevice=false;if(jQuery(window).width()>768){notMobileDevice=true;}window.modalWidth='702';if(jQuery(window).width()<702){window.modalWidth=jQuery(window).width()*0.95;}window.viewingsPopup=jQuery("#viewing-modal-dialog");new Ajax.Request(url,{method:'GET',parameters:parameters,beforeSend:function(){VashiCyoDomRenderer.renderAjaxLoader(true);},onComplete:function(response){var responseText=JSON.parse(response.responseText);var error=responseText.errors;if(error){jQuery('.viewing-addto-errors').update(error);viewingsPopup.dialog('open');}else{try{jQuery('.viewing-addto-errors').html('');var html=responseText.html.replace('id="viewings-dialog"','');jQuery("#viewing-modal-dialog").html(html);jQuery(window).resize(function(){fluidDialog();dialogHeight();});jQuery(document).on("dialogopen",".ui-dialog",function(event,ui){fluidDialog();});viewingsPopup.dialog({width:'auto',maxWidth:900,height:'auto',modal:true,fluid:true,resizable:false,open:function(){jQuery('.ui-dialog-titlebar-close').on('click',function(){viewingsPopup.dialog('close');});jQuery(document).trigger('bookingOpen');jQuery('#select-time').dropkick({mobile:false});vashiViewings.hidePickATimeDropDownDk();jQuery('body').addClass('no-scroll-with-modal');jQuery('.ui-dialog').attr('id','viewings-dialog');jQuery('.mobile-nav-toggler').removeClass('active');jQuery('.slide-menu').removeClass('active');dialogHeight();},show:{effect:"blind",duration:400},close:function(){jQuery('body').removeClass('no-scroll-with-modal');jQuery('body').removeClass('js-no-overflow');},hide:{effect:"fade"},zIndex:1000,}).dialog("open");jQuery('.ui-dialog').css('z-index','1000');if(/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){viewingsPopup.addClass("mobile-viewing");jQuery(".ui-button-text").hide();}else{jQuery('.ui-datepicker-current-day').trigger('click');}var interests={'Engagement rings':false,'Wedding rings':false,'Jewellery':false};var contact={'Whatsapp':true,'Call':false,'Email':false};jQuery('.contactInterest > div .row > div').click(function(){if(typeof interests[jQuery(this).html()]!=='undefined'){toggleAdditionalInfoData(jQuery(this).html(),interests);}else{toggleAdditionalInfoData(jQuery(this).html(),contact);}toggleAdditionalInfoElements();});var toggleAdditionalInfoElements=function(){window.bookAViewing=window.bookAViewing||{};jQuery('.contactInterest > div .row > div').each(function(index,elem){if(typeof interests[jQuery(elem).html()]!=='undefined'){if(interests[jQuery(elem).html()]){jQuery(elem).addClass('selected');window.bookAViewing.product_type_interests=jQuery(elem).html();}else{jQuery(elem).removeClass('selected');}}else{if(contact[jQuery(elem).html()]){jQuery(elem).addClass('selected');window.bookAViewing.preferred_contact=jQuery(elem).html();}else{jQuery(elem).removeClass('selected');}}});};var toggleAdditionalInfoData=function(target,options){for(var i in options){if(i===target){options[i]=!options[i];}else{options[i]=false;}}};jQuery("#viewings").click(function(){viewingsPopup.dialog("open");});jQuery(".mobViewings").click(function(){viewingsPopup.dialog("open");});jQuery('.tab:first-child').on('click',function(){jQuery('.viewings-content .login-tabs').css('min-height','300px')});jQuery('.tab:last-child').on('click',function(){jQuery('.viewings-content .login-tabs').css('min-height','500px')});jQuery('.ui-widget-overlay').css('z-index','');var close=jQuery(".ui-dialog-titlebar-close")[jQuery(".ui-dialog-titlebar-close").length-1];if(jQuery(close).hasClass('ui-button')===false){jQuery(close).addClass('ui-button');}if(jQuery(close).hasClass('ui-widget')===false){jQuery(close).addClass('ui-widget');}if(jQuery(close).hasClass('ui-state-default')===false){jQuery(close).addClass('ui-state-default');}if(jQuery(close).hasClass('ui-corner-all')===false){jQuery(close).addClass('ui-corner-all');}if(jQuery(close).hasClass('ui-button-icon-only')===false){jQuery(close).addClass('ui-button-icon-only');}if(jQuery(close).has('span').length<1){var elms='<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">Close</span>';jQuery(close).html(elms);}}catch(e){console.log(e);}}VashiCyoDomRenderer.renderAjaxLoader(false);},onLoading:function(){jQuery('.viewings-basket-loader')[jQuery('.viewings-basket-loader').length-1].setStyle({display:'block'});},onLoaded:function(){jQuery('.viewings-basket-loader')[jQuery('.viewings-basket-loader').length-1].setStyle({display:'none'});}});}Progress=Class.create();Progress.prototype={initialize:function(formId){this.form=$(formId);if(!this.form){return;}this.validator=new Validation(this.form);},submit:function(){if(this.validator.validate()){this.request();}return false;},submitWithoutAjax:function(){if(this.validator.validate()){this.form.submit();}return false;},request:function(){var form=this.form;var params={};if(this.form.id==='viewings-calender-form'){window.VashiBeginBookAViewing=true;var options=window.bookAViewing?window.bookAViewing:{};params={date:this.form.serialize(true).day,time:this.form.serialize(true).time,store:this.form.serialize(true).store};if(typeof options.preferred_contact!=='undefined'){params.contact=options.preferred_contact;}if(typeof options.product_type_interests!=='undefined'){params.interest=options.product_type_interests;}}else{params=this.form.serialize(true);}new Ajax.Request(this.form.readAttribute('action'),{method:'GET',parameters:params,onComplete:function(response){vashiViewings.hideAjaxSpinner();if(jQuery('#viewings-calender-form').is(":visible")){if(response.responseText==''){alert("Please ensure time, date and store are selected");}}var responseText=JSON.parse(response.responseText);var error=responseText.errors;if(error){jQuery('#'+form.id+' .errors')[jQuery('#'+form.id+' .errors').length-1].update(error)}else{jQuery('#'+form.id+' .errors')[jQuery('#'+form.id+' .errors').length-1].update('');jQuery('.viewings-content')[jQuery('.viewings-content').length-1].update(responseText.html.replace(/&#8232;/g," "));}},onLoading:function(){vashiViewings.showAjaxSpinner();},onLoaded:function(){vashiViewings.hideAjaxSpinner();jQuery('.booking-close').hide();}});}};function updateViewingsWidget(url){window.modalWidth='702';if(jQuery(window).width()<702){window.modalWidth=jQuery(window).width()*0.95;}new Ajax.Request(url,{method:'GET',onComplete:function(response){var responseText=JSON.parse(response.responseText);jQuery("#viewings-dialog").dialog('destroy').remove();jQuery('.viewings-dialog-wrapper')[jQuery('.viewings-dialog-wrapper').length-1].update(responseText.html);jQuery("#viewings-dialog").dialog({autoOpen:false,modal:true,width:window.modalWidth,open:function(){jQuery('.ui-widget-overlay').bind('click',function(){jQuery('#viewings-dialog').dialog('close');})},show:{effect:"blind",duration:400},hide:{effect:"fade"},zIndex:1000});jQuery('.ui-dialog').css('z-index','1000');jQuery("#viewings").click(function(){jQuery("#viewings-dialog").dialog("open");});jQuery(".mobViewings").click(function(){jQuery("#viewings-dialog").dialog("open");});jQuery('.tab:first-child').on('click',function(){jQuery('.viewings-content .login-tabs').css('min-height','300px')});jQuery('.tab:last-child').on('click',function(){jQuery('.viewings-content .login-tabs').css('min-height','500px')});}});}function changeDate(url){window.modalWidth='702';if(jQuery(window).width()<702){window.modalWidth=jQuery(window).width()*0.95;}jQuery('.cancel-errors')[Query('.cancel-errors').length-1].update('');var selected=null;jQuery('.radio-booking-id').each(function(){if(jQuery(this).is(':checked')){selected=jQuery(this);}});if(!selected){jQuery('.cancel-errors')[jQuery('.cancel-errors').length-1].update('Please select an appointment first.');}else{if(window.confirm("Are you sure you wish to proceed?")){new Ajax.Request(url,{method:'GET',parameters:{'booking_id':selected.val()},onComplete:function(response){var responseText=JSON.parse(response.responseText);jQuery("#viewings-dialog").dialog('destroy').remove();jQuery('.my-account')[jQuery('.my-account').length-1].update(responseText.list);jQuery('.viewings-dialog-wrapper')[jQuery('.viewings-dialog-wrapper').length-1].update(responseText.viewing);jQuery("#viewings-dialog").dialog({autoOpen:false,modal:true,width:window.modalWidth,open:function(){jQuery('.ui-widget-overlay').bind('click',function(){jQuery('#viewings-dialog').dialog('close');});},show:{effect:"blind",duration:400},hide:{effect:"fade"},zIndex:500,close:function(){jQuery('body').removeClass('js-no-overflow');}});jQuery('.ui-dialog').css('z-index','1000');jQuery("#viewings-dialog").dialog("open");jQuery("#viewings").click(function(){jQuery("#viewings-dialog").dialog("open");});jQuery(".mobViewings").click(function(){jQuery("#viewings-dialog").dialog("open");});jQuery('.tab:first-child').on('click',function(){jQuery('.viewings-content .login-tabs').css('min-height','300px')});jQuery('.tab:last-child').on('click',function(){jQuery('.viewings-content .login-tabs').css('min-height','500px')});},onLoading:function(){jQuery('.viewings-cancel-loader')[jQuery('.viewings-cancel-loader').length-1].setStyle({display:'block'});jQuery('.outstanding-viewings')[jQuery('.outstanding-viewings').length-1].setStyle({opacity:0.5});},onLoaded:function(){jQuery('.viewings-cancel-loader')[jQuery('.viewings-cancel-loader').length-1].setStyle({display:'none'});jQuery('.outstanding-viewings')[jQuery('.outstanding-viewings').length-1].setStyle({opacity:1});}});}}}function cancelAppointment(url){window.modalWidth='702';if(jQuery(window).width()<702){window.modalWidth=jQuery(window).width()*0.95;}jQuery('.cancel-errors')[jQuery('.cancel-errors').length-1].update('');var selected=null;jQuery('.radio-booking-id').each(function(){if(jQuery(this).is(':checked')){selected=jQuery(this);}});if(!selected){jQuery('.cancel-errors')[jQuery('.cancel-errors').length-1].update('Please select an appointment first.');}else{if(window.confirm("Are you sure you wish to proceed?")){new Ajax.Request(url,{method:'GET',parameters:{'booking_id':selected.val()},onComplete:function(response){var responseText=JSON.parse(response.responseText);jQuery('.my-account')[jQuery('.my-account').length-1].update(responseText.list);},onLoading:function(){jQuery('.viewings-cancel-loader')[jQuery('.viewings-cancel-loader').length-1].setStyle({display:'block'});jQuery('.outstanding-viewings')[jQuery('.outstanding-viewings').length-1].setStyle({opacity:0.5});},onLoaded:function(){jQuery('.viewings-cancel-loader')[jQuery('.viewings-cancel-loader').length-1].setStyle({display:'none'});jQuery('.outstanding-viewings')[jQuery('.outstanding-viewings').length-1].setStyle({opacity:1});}});}}}function cancelViewing(url,booking_id){}function loginSignupTrigger(){if(document.getElementById("login-content").style.display=="none"){document.getElementById("login-content").style.display="block";document.getElementById("signup-content").style.display="none";document.getElementById("top-message").innerHTML="Don't have an account? <a href='#' onclick='loginSignupTrigger()'>Sign up here</a>";}else{document.getElementById("login-content").style.display="none";document.getElementById("signup-content").style.display="block";document.getElementById("top-message").innerHTML="Have an account already? <a href='#' onclick='loginSignupTrigger()'>Sign in here</a>";}}if(jQuery.fancybox){jQuery.fancybox.open([{href:'images/boutique/b1.jpg',},{href:'images/boutique/b2.jpg',},{href:'images/boutique/b3.jpg',}],{helpers:{thumbs:{width:75,height:50}}});}